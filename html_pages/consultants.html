<!doctype html>
<html>

  <head>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed' rel='stylesheet'>
    <link rel="shortcut icon" href="/favicon.ico" type="image/icon">
    <link rel="icon" href="/favicon.ico" type="image/icon">
    <link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
    <meta charset="utf-8">
    <script src="https://openlayers.org/en/v4.6.5/build/ol.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Мансийский язык: консультанты</title>
    <style>
    .jumbotron {
        padding: 4rem 2rem;
        margin-bottom: 0rem;
        /*visibility: hidden;
        height: 110vh;*/
    }
    .rffi { font-size: 0.9rem; }
    .navbar-brand { left: 10px }
    @font-face {
        font-family: "Stolz Thin";
        src: url("stolz_thin.otf");
    }
    @font-face {
        font-family: "Stolz Light";
        src: url("stolz_light.otf");
    }
    @font-face {
        font-family: "Stolz Book";
        src: url("stolz_book.otf");
    }
    @font-face {
        font-family: "Stolz Medium";
        src: url("stolz_medium.otf");
    }
    @font-face {
        font-family: "GuberniaTyg";
        src: url("gubernia.ttf");
    }
    @font-face {
    font-family: "Caviar Dreams";
    src: url("caviar.ttf");
    }
    @font-face {
        font-family: "South Park Cyrillic";
        src: url("south_park.ttf");
    }
    .nav-item {
        font-family: "Stolz Light";
        font-size: 3px;
    }
    #ornament-f {
        background-image: url(//digital-mansi.com/ornament2.png);
        background-size: 340px;
        background-position-x: -5px;
    }
    #ornament-s {
        background-image: url(//digital-mansi.com/ornament2.png);
        background-size: 340px;
        background-position-x: -135px;
    }
    .footer {
        box-shadow: 0 -1px 2px 0 rgba(0,0,0,0.5);
    }
    li.media div a {
        color: #20932b;
        font-weight: bold;
    }
    ul li.media {
        margin-bottom: 20px;
    }
    ul li img {
        border-radius: 50%;
    }
    li.media p {
        margin-bottom: 0.5rem;
    }
    h5 {
        font-size: 0.9rem !important;
        line-height: 0.6;
    }
    .map {
        height: 58%;
        width: 55%;
        left: 43%;
        position: absolute;
    }
    small {
        font-size: 70%;
    }
    #comment {
        line-height: 1.2;
        /*outline: 1px dotted #000;*/
        text-align: center;
        vertical-align: middle;
        font-family: Stolz Light;
        font-style: italic;
    }
    .display-4 {
        line-height: 0.4;
    }
    .route-link {
        font-size: 12px;
        font-color: red;
    }
    .popover {
      max-width: 150%;
    }
    .popover-header {
      font-weight: bold;
      font-family: Stolz Light !important;
    }
    .popover-body {
      background-color: #f5f5f5;
    }
    .popover-content-div {
      font-family: Stolz Light !important;
    }
    </style>
    <script>
        function disripp(el) {
          try {
            $(el).find('div').remove();
          } catch (e) {};
        }
        audio = new Audio('sable.mp3');
        $('.navbar-brand').click(function () {
          audio.play();
          setTimeout(function(){audio.pause();}, 5000);    
        });
    </script>
  </head>

  <body>

  <nav class="navbar sobol navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand withoutripple" href="#" onclick="disripp(this)"><img src="sobol.svg" width="100"></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <font face="Stolz Light" size="3">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="index.html">Главная</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="corpus"><font face="Stolz Light">Корпус</font></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="participants.html">Участники</a>
      </li>
       <li class="nav-item active">
        <a class="nav-link" href="consultants.html">Консультанты <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="publications.html">Публикации</a>
      </li>
       <li class="nav-item">
        <a class="nav-link" href="bibliography.html">Библиография</a>
      </li>
      
    </ul>
    </font>
  </div>
</nav>

<div id="ornament-f" class="ornament" style="width:135px; position: absolute;">&nbsp;</div>
<div id="ornament-s" class="ornament" style="width:135px; position: absolute; right: 0%;">&nbsp;</div>

<div class="jumbotron" style="width: 80%; position: relative; left: 10%">
  <h1 class="display-4">
    <font face="GuberniaTyg" size="7">Консультанты по мансийскому языку</font>
  </h1>
  <hr class="my-4">

  <p align="justify" style="font-family: Stolz Light; font-size: 14px;">На этой странице представлены консультанты по мансийскому языку, с которыми участники проекта работали в июле-августе 2017 г. и январе-феврале 2018 г. Все они являются носителями верхнелозьвинского диалекта мансийского языка, проживают или проживали в деревнях Ушма и Тресколье Ивдельского района Свердловской области.</p>
  
  <hr class="my-4">
  <div id="map" class="map"></div>
  <ul class="list-unstyled" style="font-family: Stolz Light; font-size: 14px; line-height: 18px;">
  <li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">
        1. Алгадьева Анна Николаевна <route
              place-0="Тресколье"
              place-1="Хулимсунт"
              last-place-prefix="п."
              last-place-url="//ru.wikipedia.org/wiki/%D0%A5%D1%83%D0%BB%D0%B8%D0%BC%D1%81%D1%83%D0%BD%D1%82"
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iQfYHD" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              story=""
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >Т,Х</route>
      </h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">2. Анямова Александра Васильевна <route
              place-0="Тресколье"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3eKhlPA" width="560" height="400" frameborder="1" allowfullscreen="true" onload="adjustPopover(&quot;.pop-right&quot;, this);"></iframe>'
              story=""
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >Т</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">3. Анямова Альбина Александровна <route
              place-0="Тресколье"
              place-1="Ушма"
              last-place-url="https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iUqTsA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              story=""
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >Т,У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">4. Анямов Валерий Николаевич <route
              place-0="Тресколье"
              place-1="Сургут"
              place-2="Санкт-Петербург"
              place-3="Ханты-Мансийск"
              place-4="Ушма"
              last-place-url="https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iUd6PD" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              story=""
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >Т,...,У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">5. Анямова Вера Владимировна <route
              place-0="Ушма"
              rel-0-1="varies"
              place-1="Североуральск"
              story="Проживает в г. Североуральск и д. <a href='https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)'>Ушма</a>"
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iYrFwD" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >У/С</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">6. Анямов Евгений <a href="#" class="pn-unknown">???</a> <route
              place-0="?"
              rel-0-1="varies"
              place-1="Ушма"
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iTeBxA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              story="Не проживает в д. <a href='https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)'>Ушма</a> постоянно"
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >?/У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">7. Анямов Евгений Юрьевич <route
              place-0="Ушма"
              last-place-url="https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iTeBxA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">8. Анямов Николай Алексеевич <route
              place-0="Ушма"
              last-place-url="https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iTeBxA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">9. Анямова Нина Михайловна <route
              place-0="Ушма"
              place-1="?"
              story="Место проживания неизвестно"
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >У,?</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">10. Анямов Степан Николаевич <route
              place-0="Ушма"
              place-1="лес"
              story="Проживает в лесу"
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >У,?</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">11. Бахтиярова Елизавета Павловна <route
              place-0="Тресколье"
              place-1="?"
              story="Место проживания неизвестно"
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >Т,?</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">12. Бахтияров Павел Савельевич <route
              place-0="Тресколье"
              place-1="Ушма"
              last-place-url="https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iUqTsA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >Т,У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">13. Бахтияров Прокопий Тимофеевич <route
              place-0="Бахтиярова Юрта"
              rel-0-1="varies"
              place-1="Тресколье"
              story="Проживает в п. <a href='https://ru.wikipedia.org/wiki/%D0%91%D0%B0%D1%85%D1%82%D0%B8%D1%8F%D1%80%D0%BE%D0%B2%D0%B0_%D0%AE%D1%80%D1%82%D0%B0'>Бахтиярова Юрта</a> и д. Тресколье"
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3iMrL-C" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >БЮ/Т</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">14. Дунаев Андрей <a href="#" class="pn-unknown">???</a> <route
              place-0="Лепля"
              place-1="Ушма"
              last-place-url="https://ru.wikipedia.org/wiki/%D0%A3%D1%88%D0%BC%D0%B0_(%D0%BF%D0%BE%D1%81%D1%91%D0%BB%D0%BE%D0%BA)"
              last-place-prefix="д."
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >Л,У</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">15. Пеликов Михаил Тимофеевич <route
              place-0="Тресколье"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3i2uwkA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="m"
              age=""
              route-pic=""
      >Т</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">16. Пеликова Светлана Прокопьевна <route
              place-0="Тресколье"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3i2uwkA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >Т</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">17. Тасманова Галина Павловна <route
              place-0="Ушма"
              place-1="?"
              alive="y"
              story="Место проживания неизвестно"
              gender="f"
              age=""
              route-pic=""
      >У,?</route></h5>
    </div>
  </li><li class="media">
    <div class="media-body">
      <h5 class="mt-0 mb-1">18. Тасманова Мария Васильевна <route
              place-0="Тресколье"
              last-place-prefix="д."
              last-place-frame='<iframe src="https://yandex.ru/map-widget/v1/-/CBu3i2uwkA" width="560" height="400" frameborder="1" allowfullscreen="true"></iframe>'
              alive="y"
              gender="f"
              age=""
              route-pic=""
      >Т</route></h5>
    </div>
  </li>
</ul>

<script type="text/javascript">
    var polyCoords = [];
    var coords = "61.753316,59.452373 60.697349,60.417290 60.867506,60.425474 61.271580,60.188148 61.5626543,60.0117084 61.625264,60.034321".split(' ');
    var names = ["Перевал Дятлова", "Ивдель", "Полуночное", "Вижай", "Ушма", "Тресколье"];

    for (var i in coords) {
        var c = coords[i].split(',');
        polyCoords.push(ol.proj.transform([parseFloat(c[1]), parseFloat(c[0])], 'EPSG:4326', 'EPSG:3857'));
    }
    
    var circle_features = [];
    
    for (var j = 0; j < polyCoords.length; j ++) {
        var feat = new ol.Feature({
            geometry: new ol.geom.Circle(polyCoords[j], 4000)
        });
        feat.set('description', names[j]);
        if (["Ушма", "Тресколье"].indexOf(names[j]) != -1){
            feat.setStyle(descriptionFunc_mansi);
        }
        else {
            feat.setStyle(descriptionFunc_else);
        }
        circle_features.push(feat);
    }

    var layer = new ol.layer.Vector({
        source: new ol.source.Vector({
            features: circle_features
        })
    });

    var map = new ol.Map({
    target: 'map',
    layers: [new ol.layer.Tile({
        source: new ol.source.OSM()
        }), layer],
    view: new ol.View({
        center: ol.proj.transform([60.225335, 61.173204], 'EPSG:4326', 'EPSG:3857'),
        zoom: 7.8
    })
    });
    
    function descriptionFunc_mansi() {
        return [
            new ol.style.Style({
                fill: new ol.style.Fill({
                color: 'rgba(255,0,0,0.8)'
            }),
            stroke: new ol.style.Stroke({
                color: 'red',
                width: 1.25
            }),
            text: new ol.style.Text({
                font: '12px Calibri,sans-serif',
                fill: new ol.style.Fill({ color: '#000' }),
                stroke: new ol.style.Stroke({
                color: '#fff', width: 2
                }),
                text: this.get('description')
            })
            })
        ];
    }
    function descriptionFunc_else() {
        return [
            new ol.style.Style({
                fill: new ol.style.Fill({
                color: 'rgba(0,0,255,0.8)'
            }),
            stroke: new ol.style.Stroke({
                color: '#0000ff',
                width: 1.25
            }),
            text: new ol.style.Text({
                font: '12px Calibri,sans-serif',
                fill: new ol.style.Fill({ color: '#000' }),
                stroke: new ol.style.Stroke({
                color: '#fff', width: 2
                }),
                text: map.getView().getZoom() > 4 ? this.get('description') : ''
            })
            })
        ];
    }
    $("#map").append("<div id='comment'><small><nobr>Красным цветом на карте отмечены населённые пункты,\
    <br>в которых проживают носители мансийского языка</nobr></small></div>");
</script>

</div>

<nav class="navbar navbar-default navbar-light bg-light footer" style="height: 50px; position: relative;" role="navigation">
  <div class="navbar-header" style="visibility: hidden">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>    
  </div>
  <font face="Stolz Light" class="navbar-brand" style="font-size: 12px">САЙТ СОЗДАН ПРИ ПОДДЕРЖКЕ ГРАНТА РФФИ 18-012-00833А "ДИНАМИКА ФОНЕТИЧЕСКИХ И ГРАММАТИЧЕСКИХ СИСТЕМ ОБСКО-УГОРСКИХ ЯЗЫКОВ" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2019</font>
  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav navbar-left">
        <li><a href="#">Left</a></li>
        <li><a href="#about">Left</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="#about">Right</a></li>
      <li><a href="#contact">Right</a></li>
    </ul>
  </div>
</nav>

<style>
.footer .navbar-brand
{
    position: absolute;
    width: 100%;
    left: 0;
    text-align: center;
    margin: 0 auto;
}
.footer .navbar-toggle {
    z-index: 3;
}
</style>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>
    <script>$(document).ready(function() { $('body').bootstrapMaterialDesign(); });</script>
    <script>
    function adjustPopover(popover, iframe) {
      var height = iframe.contentWindow.document.body.scrollHeight + 'px',
          popoverContent = $(popover).next('.popover-content');
      iframe.style.height = height;
      popoverContent.css('height', height);
    }
    window.onload = function () {
        $('.ornament').height($('.jumbotron').height() + $('.sobol').height() + 80);
        audio = new Audio('sable.mp3');
        $('.navbar-brand').click(function () {
              audio.play();
              setTimeout(function(){audio.pause();}, 1700);    
        });
        $("route").each(function() {
          var link = $("<a></a>");
          var route_title = "";
          var route_content = "";
          $(this).html(
            "(" + $(this).html().replace(/\.\.\./g, '&hellip;').replace(/,/g, '&#8594;').replace(
              /([^<])\//g, '$1&#8596;'
            ).replace(/&#8594;\s*&hellip;\s*&#8594;/g, '&#10230;') + ")"
          );
          link.attr("role", "button").attr("data-toggle", "popover").attr("data-trigger", "hover");
          link.attr("class", "route-link");
          var i = 0;
          while ($(this).attr("place-" + i)) {
            route_title += $(this).attr("place-" + i);
            if ($(this).attr("place-" + (i + 1))) {
              var rel = "rel-" + i + "-" + (i + 1);
              if (!$(this).attr(rel)) {
                route_title += " &#8594; "
              } else if ($(this).attr(rel) == "varies") {
                route_title += " &#8596; ";
              }
            }
            i ++;
          }
          route_title = route_title;
          var rt_insertion = document.createElement("div");
          rt_insertion.innerHTML = route_title;
          //link.attr("title", route_title);
          //link.attr("data-content", route_content);
          link.html($(this).html());
          $(this).parent().append(link);
          var rc_insertion = document.createElement("div");
          rc_insertion.className = "popover-content-div";
          rc_insertion.innerHTML = route_content;
          if ($(this).attr("story")) {
            var story = document.createElement("div");
            story.innerHTML = $(this).attr("story");
            rc_insertion.appendChild(story);
          }
          else if ($(this).attr("last-place-prefix")) {
            var story = document.createElement("div");
            var story_end = "в ";
            if ($(this).attr("last-place-url")) {
              story_end += '<a href="' + $(this).attr("last-place-url") + '">';
            }
            story_end += $(this).attr("last-place-prefix") + " " + $(this).attr("place-" + (i - 1));
            story_end += '</a>';
            if ($(this).attr("alive") == "y") {
              story.innerHTML = "Проживает " + story_end;
            }
            else if ($(this).attr("gender")) {
              story.innerHTML = "Проживал" + ($(this).attr("gender") == "m" ? "а" : "") + " " + story_end;
            }
            rc_insertion.appendChild(story);
          }
          if ($(this).attr("last-place-frame")) {
           var lpf = document.createElement("div");
           lpf.innerHTML = "<hr>" + $(this).attr("last-place-frame");
           rc_insertion.appendChild(lpf);
          }
          if ($(this).attr("age")) {
            var age = document.createElement("div");
            age.innerHTML = "Возраст: <b>" + $(this).attr("age") + "</b>";
            rc_insertion.appendChild(age);
          }
          link.popover({
            html: true,
            trigger: "manual",
            animation: false,
            title: rt_insertion,
            content: rc_insertion
          }).on('mouseenter', function () {
            var _this = this;
            $(this).popover('show');
            $('.popover').on('mouseleave', function () {
                $(_this).popover('hide');
            });
          }).on('mouseleave', function () {
            var _this = this;
            setTimeout(function () {
              if (!$('.popover:hover').length) {
                $(_this).popover('hide');
              }
            }, 200);
          });
          $(this).remove();
        });
    };
    </script>

  </body>


</html>
